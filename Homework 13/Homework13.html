<html>
    <head>
        <title>
            First p5.js page
        </title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.1.9/p5.min.js"></script>
        <script>

            var characterX = 100;
            var characterY = 100;

            var w = 87;
            var s = 83;
            var a = 65;
            var d = 68;

            var shapeX = 30;
            var shapeY = 50;

            var shapeXs = [];
            var shapeYs = [];
            var diameters = [];


            var shapeXSpeed = [];
            var shapeYSpeed = [];

            var rectX = [];
            var rectY = [];
            var rectSpeedX = [];
            var rectSpeedY = [];
            var rectSize = [];

            var mouseShapeX;
            var mouseShapeY;
            
            function setup() {  
                createCanvas(700,500);
                for (var i = 0 ; i < 10; i++) { 

                    shapeXSpeed[i] = getRandomNumber (300);
                    shapeYSpeed[i] = getRandomNumber (400);
                    shapeXs[i] = getRandomNumber(700);
                    shapeYs[i] = getRandomNumber(500);
                    diameters[i] = getRandomNumber(45);

                    rectX[i] = getRandomNumber (50);
                    rectY[i] = getRandomNumber (125); 
                    rectSpeedX[i] = getRandomNumber (4,5);
                    rectSpeedY[i] = getRandomNumber (4,5);
                    rectSize[i] = getRandomNumber (20,50);
                }
               
                createCharacter(250,300);
            }

            function draw() {
    
                background(200,125,185);
                stroke(0);
                fill(0);

                createBorders(4);

                drawCharacter();
                characterMovement();

                textSize(16);
                text("EXIT", width-50,height-50)

                fill (150, 170, 130);
                for (var i = 0; i < shapeXs.length; i++) {

                    circle(shapeXs[i], shapeYs[i], diameters[i]); 
                        shapeXSpeed[i] = Math.floor(Math.random() * (Math.floor(Math.random() * 5)) + 1);
                        shapeYSpeed[i] = Math.floor(Math.random() * (Math.floor(Math.random() * 5)) + 1);
                  
                    shapeXs[i] += shapeXSpeed[i];
                    shapeYs[i] += shapeYSpeed[i];

                    if (shapeXs[i] > width) {
                         shapeXs[i] = 0;
                    }
                    if (shapeXs[i] <0) {
                        shapeXs[i] = width;
                    }
                    if(shapeYs[i] > height) {
                       shapeYs[i] = 0;
                    }
                    if (shapeYs[i] < 0) {
                        shapeYs[i] = height;
                }
            }
                fill(120, 100, 180);
                for (var i = 0; i < shapeXs.length; i++) {

                    rect(rectX[i], rectY[i], rectSize[i], rectSize[i]);
                        rectSpeedX[i] = Math.floor(Math.random() * (Math.floor(Math.random() * 5)) + 1);
                        rectSpeedY[i] = Math.floor(Math.random() * (Math.floor(Math.random() * 5)) + 1);
                
                    rectX[i] += rectSpeedX[i];
                    rectY[i] += rectSpeedY[i];

                    if (rectX[i] > width) {
                        rectX[i] = 0;
                    }
                    if (rectX[i] < 0) {
                        rectX[i] = width;
                    }
                    if (rectY[i] > height) {
                       rectY[i] = 0;
                    }
                    if (rectY[i] < 0) {
                        rectY[i] = height;
                    }
                }

                if (characterX > width && characterY > - 50) {
                    fill(0);
                    stroke(5);
                    textSize(26);
                    text("WINNER!", width/2-50, height/2-50);
                }

                fill(185, 160, 190);
                ellipse(mouseShapeX, mouseShapeY, 40, 20); 
            }
        
        function drawCharacter()
        {
        fill(100,9,60);
        triangle(characterX,characterY - 20, characterX - 15, characterY + 15, characterX +15, characterY +15);

        }

    function createCharacter(x, y) {
    
        characterX = x;
        characterY = y;
        }

    function characterMovement()
    {
        if(keyIsDown(w))
        {
            characterY -= 10;
        }
        if(keyIsDown(s))
        {
            characterY += 10;
        }
        if(keyIsDown(a))
        {
            characterX -= 10;
            console.log("movement: " + characterX);
        }
        if(keyIsDown(d))
        {
            characterX +=10;
        }
    }

    function createBorders(thickness)
    {
        rect(0,0,width,thickness);

        rect(0,0,thickness,height);

        rect(0, height-5,width, thickness);

        rect(width-thickness,0,thickness,height-50);
    }

    function mouseClicked()   {
        mouseShapeX = mouseX;
        mouseShapeY = mouseY;
    }

    function getRandomNumber(number) {
        return Math.floor(Math.random() * number) + 10;
    }

</script>
    </head>
    <body>

    </body>
</html>