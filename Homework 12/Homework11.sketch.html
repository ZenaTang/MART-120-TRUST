<html>
    <head>
        <title>
            First p5.js page
        </title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.1.9/p5.min.js"></script>
        <script>

            var characterX = 100;
            var characterY = 100;

            var w = 87;
            var s = 83;
            var a = 65;
            var d = 68;

            var shapeX = 30;
            var shapeY = 50;
            var shapeXSpeed;
            var shapeYSpeed;

            var mouseShapeX;
            var mouseShapeY;

            var rectX = 200
            var rectY = 100
            var rectXSpeed;
            var rectYSpeed;
            
            function setup() 
            {
                createCanvas(700,500);

                shapeXSpeed = Math.floor(Math.random() * (Math.floor(Math.random() * 5)) + 1);
                shapeYSpeed = Math.floor(Math.random() * (Math.floor(Math.random() * 5)) + 1);

                rectXSpeed = Math.floor(Math.random() * (Math.floor(Math.random() * 5)) + 1);
                rectYSpeed = Math.floor(Math.random() * (Math.floor(Math.random() * 5)) + 1);
                createCharacter(250,300);
            }
              function draw()
    {
        background(200,125,185);
        stroke(0);
        fill(0);

        createBorders(4);

        drawCharacter();
        characterMovement();

        drawExitText();
        rectMovement();
        circleMovement();
        drawMouseShape();
        checkForWin();
    }

    function drawExitText()
    {
        textSize(16);
        text("EXIT", width-50,height-50)
    }

    function rectMovement()
    {
         fill(120, 100, 180);
        rect(rectX, rectY, 40,30);

        rectXSpeed = Math.floor(Math.random() * (Math.floor(Math.random() * 5)) + 1);
        rectYSpeed = Math.floor(Math.random() * (Math.floor(Math.random() * 5)) + 1);

        rectX += rectXSpeed;
        rectY += rectYSpeed;

        if (rectX > width) {
            rectX = 0;
        }
        if (rectX < 0) {
            rectX = width;
        }
        if (rectY > height) {
            rectY = 0;
        }
        if (rectY < 0) {
            rectY = height;
        }

    }

    function circleMovement()
    {
         fill(180, 200, 220);
        ellipse(shapeX, shapeY, 40)

        shapeXSpeed = Math.floor(Math.random() * (Math.floor(Math.random() * 5)) +1);
        shapeYSpeed = Math.floor(Math.random() * (Math.floor(Math.random() * 5)) +1);

        shapeX += shapeXSpeed;
        shapeY += shapeYSpeed;

        if(shapeX > width)
        {
            shapeX = 0;
        }
        if(shapeX < 0)
        {
            shapeX = width;
        }
        if(shapeY > height)
        { 
            shapeY = 0;
        }
        if(shapeY < 0)
        {
            shapeY = height;
        }
    }

    function drawMouseShape()
    {
        
        fill(50);
        circle(mouseShapeX, mouseShapeY,50);

    }

    function checkForWin()
    {
        if(characterX > width && characterY > height -50)
        {
            fill(0);
            stroke(5);
            textSize(26);
            text("WINNER!", width/2-50, height/2-50);
        }
    }
        
        function drawCharacter()
        {
        fill(100,9,60);
        triangle(characterX,characterY - 20, characterX - 15, characterY + 15, characterX +15, characterY +15);

        }

    function createCharacter(x, y)
    {
        characterX = x;
        characterY = y;
        console.log(characterX);

    }

    function characterMovement()
    {
        if(keyIsDown(w))
        {
            characterY -= 10;
        }
        if(keyIsDown(s))
        {
            characterY += 10;
        }
        if(keyIsDown(a))
        {
            characterX -= 10;
            console.log("movement: " + characterX);
        }
        if(keyIsDown(d))
        {
            characterX +=10;
        }
    }

    function createBorders(thickness)
    {
        rect(0,0,width,thickness);

        rect(0,0,thickness,height);

        rect(0, height-5,width, thickness);

        rect(width-thickness,0,thickness,height-50);
    }

    function mouseClicked()
    {
        mouseShapeX = mouseX;
        mouseShapeY = mouseY;
    }

</script>
    </head>
    <body>

    </body>
</html>
